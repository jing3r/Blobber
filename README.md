# Blobber RPG Prototype

![Gameplay Screenshot](https://github.com/jing3r/jing3r/blob/main/Blobber.gif?raw=true)

## О проекте

Технический прототип партийной RPG ("blobber"), разработанный на Unity и сфокусированный на реализации и архитектуре ключевых игровых систем.

**[Запустить в браузере на itch.io](https://jing3r.itch.io/blobber)**
*(Рекомендуется использовать полноэкранный режим для корректной работы управления камерой)*

---

## Ключевые системы и архитектурные решения

### Унифицированная архитектура персонажей
И PC, и NPC построены на едином наборе компонентов (`CharacterStats`, `Inventory`, `CharacterEquipment`). Вторые отличаются от первых наличием `AIController`, модулем поведения. Любая механика автоматически работает на всех, а NPC в дальнейшем могут быть взяты в отряд и стать PC.

### Тактическая боевая система и динамический AI
Боевая система работает в реальном времени по принципу **Готовность/Восстановление** для каждого персонажа. Искусственный интеллект, построенный на паттерне **State Machine**, адаптирует свое поведение:
-   **Состояния:** `Idle`, `Wandering`, `Chasing`, `Attacking`, `Fleeing`.
-   **Скорость:** Движение автоматически замедляется или ускоряется в зависимости от текущего состояния.
-   **Отношения:** Система `Alignment` (Friendly, Neutral, Hostile) определяет реакцию NPC на игрока и может изменяться в ходе игры.

### Гибкая система способностей через композицию
Способность представляет собой ScriptableObject-контейнер для списка полиморфных эффектов. Благодаря атрибуту **`[SerializeReference]`**, новые способности создаются в редакторе Unity путем комбинирования готовых эффектов без написания нового кода. Реализованы следующие типы эффектов:
-   `DamageEffectData`
-   `HealEffectData`
-   `ApplyStatusEffectData`
-   `CreateZoneEffectData`
-   `DisplacementEffectData` (толчок и рывок)
-   `ChangeAIStateEffectData`
-   `ChangeAlignmentEffectData`
-   `InteractEffectData` (взаимодействие с объектами)


### Сеточный инвентарь и система экипировки
Инвентарь в стиле Kenshi с независимыми окнами и полным drag-n-drop. Система включает ряд QoL-функций и подкреплена следующими техническими решениями:
-   **Функционал:** "Взять всё", быстрое перемещение, разделение стаков, прямая передача предмета.
-   **Алгоритм сортировки:** Предметы упорядочиваются по размеру и форме для оптимальной визуальной компоновки.
-   **Экипировка на `[Flags]` Enum:** Использование битовых флагов позволяет обрабатывать как подходящие сразу к нескольким слотам предметы, так и требующие сразу несколько слотов для экипировки.

### Персистентный мир и универсальная система сохранений
Сущности не уничтожаются, а меняют свое состояние (например, погибшему NPC присваивается компонент `LootableCorpse`). Такой подход гарантирует стабильность универсальной системы сохранений на основе интерфейса `ISaveable` и уникальных ID.

---

## Как запустить

1.  Клонируйте репозиторий.
2.  Откройте проект в Unity Hub (версия **2022.3.11f1** или новее).
3.  Откройте сцену `MainScene` из папки `Assets/Scenes` и нажмите Play.
